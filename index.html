<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BeU Hub - Discover Your Passion</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Load Inter font -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
    <style>
        /* Apply Inter font */
        body {
            font-family: 'Inter', sans-serif;
        }
        /* Simple page transition fade */
        .page {
            display: none;
            animation: fadeIn 0.5s ease-in-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* --- STYLES FOR ARCHETYPE GAMES --- */

        /* Builder: Pixel Art Grid */
        .builder-grid-cell {
            width: 100%;
            padding-bottom: 100%; /* Creates a square aspect ratio */
            background-color: #e5e7eb; /* bg-gray-200 */
            border: 1px solid #d1d5db; /* border-gray-300 */
            cursor: pointer;
            transition: background-color 0.1s;
        }
        .color-swatch {
            width: 40px;
            height: 40px;
            border-radius: 9999px; /* rounded-full */
            cursor: pointer;
            border: 2px solid transparent;
            transition: all 0.2s;
        }
        .color-swatch.selected {
            border-color: #2563eb; /* border-blue-600 */
            transform: scale(1.1);
        }

        /* Strategist: Logic Puzzle */
        .strategist-light {
            width: 100%;
            padding-bottom: 100%; /* Square aspect ratio */
            border-radius: 0.5rem; /* rounded-lg */
            cursor: pointer;
            transition: all 0.2s ease-in-out;
            border: 2px solid #6b7280; /* border-gray-500 */
        }
        .strategist-light.on {
            background-color: #22c55e; /* bg-green-500 */
            border-color: #16a34a; /* border-green-600 */
            box-shadow: 0 0 15px 5px rgba(34, 197, 94, 0.4);
        }
        .strategist-light.off {
            background-color: #374151; /* bg-gray-700 */
        }

    </style>
</head>
<body class="bg-white text-gray-900 antialiased">

    <!-- Header -->
    <header class="border-b border-gray-200">
        <nav class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-4">
            <div class="flex justify-start items-center">
                <!-- Logo -->
                <span class="text-2xl font-extrabold text-blue-600">BeU Hub</span>
            </div>
        </nav>
    </header>

    <!-- Main Content Area -->
    <main class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-12 md:py-20">

        <!-- ======================================== -->
        <!-- PAGE 1: HOMEPAGE                         -->
        <!-- ======================================== -->
        <div id="page-home" class="page text-center">
            <!-- Hero Section -->
            <h1 class="text-4xl md:text-6xl font-extrabold tracking-tight mb-4">
                Find Your Passion.
            </h1>
            <h2 class="text-4xl md:text-6xl font-extrabold tracking-tight text-blue-600 mb-8">
                Start Your Quest.
            </h2>
            <p class="max-w-2xl mx-auto text-lg md:text-xl text-gray-600 mb-12">
                The BeU Hub is a free, interactive "Discovery Game" to explore who you are and what you love. Stop guessing, start discovering.
            </p>
            
            <!-- Primary CTA -->
            <button 
                onclick="showQuiz()"
                class="bg-blue-600 text-white font-bold text-lg py-4 px-10 rounded-full shadow-lg hover:bg-blue-700 transition-all duration-300 transform hover:scale-105">
                Start Your Free Discovery Quiz
            </button>

            <!-- "How It Works" Section -->
            <section class="mt-20 md:mt-32">
                <div class="grid grid-cols-1 md:grid-cols-3 gap-8 md:gap-12">
                    <!-- Step 1 -->
                    <div class="flex flex-col items-center">
                        <div class="flex items-center justify-center w-16 h-16 bg-blue-100 rounded-full mb-4">
                            <!-- Heroicon: Beaker -->
                            <svg class="w-8 h-8 text-blue-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M9.75 3.104v5.714a2.25 2.25 0 01-.659 1.591L5 14.5M9.75 3.104c-.251.023-.501.05-.75.082m.75-.082a24.301 24.301 0 014.5 0m0 0v5.714c0 .597.237 1.17.659 1.591L19 14.5m-9.25-11.396c-.251.023-.501.05-.75.082M19 14.5a2.25 2.25 0 01-2.25 2.25h-5.106a2.25 2.25 0 01-2.25-2.25m10.5 0c.069.007.137.012.204.018m-10.708 0c.067.007.134.012.201.018m10.306 0v5.714c0 .597-.237 1.17-.659 1.591L14.25 21M5 14.5c.069.007.137.012.204.018M5 14.5v5.714c0 .597.237 1.17.659 1.591L10.5 21m-5.659-6.482c.067.007.134.012.201.018" />
                            </svg>
                        </div>
                        <h3 class="text-xl font-bold mb-2">1. Take the Quiz</h3>
                        <p class="text-gray-600">Answer fun, 'Buzzfeed-style' questions about your interests.</p>
                    </div>
                    <!-- Step 2 -->
                    <div class="flex flex-col items-center">
                        <div class="flex items-center justify-center w-16 h-16 bg-blue-100 rounded-full mb-4">
                            <!-- Heroicon: Sparkles -->
                            <svg class="w-8 h-8 text-blue-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M9.813 15.904L9 18.75l-.813-2.846a4.5 4.5 0 00-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 003.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 003.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 00-3.09 3.09zM18.259 8.715L18 9.75l-.259-1.035a3.375 3.375 0 00-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 002.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 002.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 00-2.456 2.456zM16.894 20.567L16.5 21.75l-.394-1.183a2.25 2.25 0 00-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 001.423-1.423L16.5 15.75l.394 1.183a2.25 2.25 0 001.423 1.423l1.183.394-1.183.394a2.25 2.25 0 00-1.423 1.423z" />
                            </svg>
                        </div>
                        <h3 class="text-xl font-bold mb-2">2. Find Your Archetype</h3>
                        <p class="text-gray-600">Instantly discover your unique passion profile (like 'Visionary' or 'Builder').</p>
                    </div>
                    <!-- Step 3 -->
                    <div class="flex flex-col items-center">
                        <div class="flex items-center justify-center w-16 h-16 bg-blue-100 rounded-full mb-4">
                            <!-- Heroicon: RocketLaunch -->
                            <svg class="w-8 h-8 text-blue-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M15.59 14.37a6 6 0 01-5.84 7.38v-4.8m5.84-2.58a14.98 14.98 0 006.16-12.12A14.98 14.98 0 009.631 8.41m5.96 5.96a14.926 14.926 0 01-5.841 2.58m5.841-2.58L15.59 14.37m0 0l4.545 4.545M11.25 10.5l4.545 4.545M11.25 10.5L6.705 6.705M11.25 10.5l-4.545 4.545M15.59 14.37l-4.545-4.545" />
                            </svg>
                        </div>
                        <h3 class="text-xl font-bold mb-2">3. Play Your Path</h3>
                        <p class="text-gray-600">Unlock gamified 'quests' and challenges built just for you.</p>
                    </div>
                </div>
            </section>
        </div>

        <!-- ======================================== -->
        <!-- PAGE 2: QUIZ PAGE                        -->
        <!-- ======================================== -->
        <div id="page-quiz" class="page">
            <div id="quiz-container" class="max-w-3xl mx-auto">
                <!-- Quiz questions will be dynamically injected here by JavaScript -->
            </div>
            <!-- Progress Bar -->
            <div class="max-w-3xl mx-auto mt-8">
                <div class="w-full bg-gray-200 rounded-full h-2.5">
                    <div id="progress-bar" class="bg-blue-600 h-2.5 rounded-full transition-all duration-300" style="width: 0%"></div>
                </div>
            </div>
        </div>

        <!-- ======================================== -->
        <!-- PAGE 3: DASHBOARD / RESULTS              -->
        <!-- ======================================== -->
        <div id="page-dashboard" class="page">
            <div class="text-center mb-12">
                <h2 class="text-3xl font-bold text-gray-600">Your Archetype is...</h2>
                <h1 id="archetype-result" class="text-5xl md:text-7xl font-extrabold text-blue-600 my-4">
                    <!-- Result injected here -->
                </h1>
                <p id="archetype-description" class="text-xl text-gray-700 max-w-2xl mx-auto">
                    <!-- Description injected here -->
                </p>
            </div>

            <!-- Gamified Quests & Passion Playground -->
            <!-- New 2-column layout for dashboard content -->
            <div class="grid grid-cols-1 lg:grid-cols-5 gap-12 mt-12">
                
                <!-- Column 1: Passion Playground -->
                <div class="lg:col-span-3">
                    <h3 class="text-2xl md:text-3xl font-bold mb-6 text-center lg:text-left">Your Passion Playground</h3>
                    <div id="passion-playground-container" class="bg-gray-50 rounded-xl shadow-lg border border-gray-200 p-4 md:p-8 min-h-[400px]">
                        <!-- Interactive game will be injected here by JS -->
                    </div>
                </div>

                <!-- Column 2: Quests -->
                <div class="lg:col-span-2">
                    <h3 class="text-2xl md:text-3xl font-bold mb-6 text-center lg:text-left">Your New Quests</h3>
                    <div id="quest-list" class="grid grid-cols-1 gap-6">
                        <!-- Quests injected here -->
                    </div>
                </div>

            </div>


            <!-- Retake Quiz Button -->
            <div class="text-center mt-16">
                <button 
                    onclick="showHome()"
                    class="bg-gray-200 text-gray-800 font-bold py-3 px-8 rounded-full shadow-sm hover:bg-gray-300 transition-all duration-300">
                    Take the Quiz Again
                </button>
            </div>
        </div>

    </main>

    <!-- Simple Footer -->
    <footer class="text-center py-8 border-t border-gray-200 mt-20">
        <p class="text-gray-500">&copy; 2024 BeU Hub. All rights reserved.</p>
    </footer>


    <!-- ======================================== -->
    <!-- JAVASCRIPT LOGIC                         -->
    <!-- ======================================== -->
    <script>
        // --- PAGE ELEMENTS ---
        const pageHome = document.getElementById('page-home');
        const pageQuiz = document.getElementById('page-quiz');
        const pageDashboard = document.getElementById('page-dashboard');

        // --- QUIZ ELEMENTS ---
        const quizContainer = document.getElementById('quiz-container');
        const progressBar = document.getElementById('progress-bar');

        // --- DASHBOARD ELEMENTS ---
        const archetypeResult = document.getElementById('archetype-result');
        const archetypeDescription = document.getElementById('archetype-description');
        const questList = document.getElementById('quest-list');
        const passionPlaygroundContainer = document.getElementById('passion-playground-container');

        // --- QUIZ DATA ---
        // Each answer is weighted towards an archetype: 'Builder', 'Visionary', or 'Strategist'
        const quizData = [
            {
                question: "You have a free weekend. What's the plan?",
                answers: [
                    { text: "Build that side project I've been thinking about.", archetype: 'Builder' },
                    { text: "Brainstorm 10 new ideas for changing the world.", archetype: 'Visionary' },
                    { text: "Organize my schedule and finances for the next month.", archetype: 'Strategist' },
                    { text: "Hang out with friends and see where the day goes.", archetype: 'Visionary' } // Visionaries are often people-oriented
                ]
            },
            {
                question: "Which task sounds most satisfying?",
                answers: [
                    { text: "Assembling a complex piece of furniture perfectly.", archetype: 'Builder' },
                    { text: "Winning a difficult debate or board game.", archetype: 'Strategist' },
                    { text: "Creating a piece of art that makes people feel something.", archetype: 'Visionary' },
                    { text: "Fixing a broken appliance that nobody else could.", archetype: 'Builder' }
                ]
            },
            {
                question: "When facing a big problem, your first instinct is to:",
                answers: [
                    { text: "Analyze all the data and find the most logical solution.", archetype: 'Strategist' },
                    { text: "Imagine a completely new way to solve it, even if it's wild.", archetype: 'Visionary' },
                    { text: "Break it down into small, manageable steps and start building.", archetype: 'Builder' }
                ]
            },
            {
                question: "I feel most 'in the zone' when I'm...",
                answers: [
                    { text: "Connecting with people and inspiring them.", archetype: 'Visionary' },
                    { text: "Finding the pattern or flaw in a complex system.", archetype: 'Strategist' },
                    { text: "Making something tangible with my hands (or code).", archetype: 'Builder' }
                ]
            }
        ];

        // --- ARCHETYPE & QUEST DATA ---
        const archetypes = {
            Visionary: {
                description: "You're a creative, empathetic, and big-picture thinker. You're driven to inspire others and make a meaningful impact on the world.",
                quests: [
                    { title: "Pitch a World-Changing Idea", description: "In 60 seconds, record a video pitching an idea that could help your community." },
                    { title: "Map a Community Solution", description: "Identify a problem in your school and draw a mind-map of 3 possible solutions." },
                    { title: "Start a Movement", description: "Design a social media post to raise awareness for a cause you care about." }
                ]
            },
            Builder: {
                description: "You're a doer, a creator, and a problem-solver. You love to take ideas and make them real, tangible things.",
                quests: [
                    { title: "Design a New App", description: "Sketch out the 3 main screens for an app that solves a daily problem you have." },
                    { title: "3D Model a Product", description: "Use free software like Tinkercad to design a simple 3D object, like a custom keychain." },
                    { title: "Build a 'No-Code' Website", description: "Use a tool like Carrd or Framer to build a simple, one-page website about your hobby." }
                ]
            },
            Strategist: {
                description: "You're an analytical, logical, and systematic thinker. You excel at finding patterns, optimizing systems, and making smart decisions.",
                quests: [
                    { title: "Solve a Logic Puzzle", description: "Complete today's 'Sudoku' or 'KenKen' puzzle in the fastest time possible." },
                    { title: "Optimize a System", description: "Track your homework time for 3 days and create a new, more efficient schedule." },
                    { title: "Master a 'What If' Scenario", description: "Play a strategy game (like Chess or a simulation) and try to win in a new way." }
                ]
            }
        };

        // --- APP STATE ---
        let currentQuestionIndex = 0;
        let scores = {
            Builder: 0,
            Visionary: 0,
            Strategist: 0
        };

        // --- GAME STATE VARIABLES ---
        let builder_currentColor = '#3b82f6'; // bg-blue-500
        let strategist_gameState = [0, 0, 0, 0, 0, 0, 0, 0, 0]; // 3x3 grid, 0=off, 1=on

        // --- PAGE NAVIGATION ---
        function showPage(pageElement) {
            // Hide all pages
            pageHome.style.display = 'none';
            pageQuiz.style.display = 'none';
            pageDashboard.style.display = 'none';
            
            // Show the target page
            pageElement.style.display = 'block';
            window.scrollTo(0, 0); // Scroll to top on page change
        }

        function showHome() {
            showPage(pageHome);
        }

        function showQuiz() {
            // Reset state for a new quiz
            currentQuestionIndex = 0;
            scores = { Builder: 0, Visionary: 0, Strategist: 0 };
            
            showPage(pageQuiz);
            renderQuestion();
        }

        function showDashboard() {
            renderDashboard();
            showPage(pageDashboard);
        }

        // --- QUIZ LOGIC ---
        function renderQuestion() {
            // Clear previous question
            quizContainer.innerHTML = '';

            if (currentQuestionIndex >= quizData.length) {
                // Quiz is over
                showDashboard();
                return;
            }

            const questionData = quizData[currentQuestionIndex];

            // Update Progress Bar
            const progressPercent = (currentQuestionIndex / quizData.length) * 100;
            progressBar.style.width = `${progressPercent}%`;

            // Create question text
            const questionText = document.createElement('h2');
            questionText.className = 'text-3xl font-bold text-center mb-12';
            questionText.textContent = questionData.question;
            quizContainer.appendChild(questionText);

            // Create answer grid
            const answersGrid = document.createElement('div');
            answersGrid.className = 'grid grid-cols-1 md:grid-cols-2 gap-4';
            
            questionData.answers.forEach(answer => {
                const answerButton = document.createElement('button');
                answerButton.className = 'w-full text-left p-6 bg-gray-50 border-2 border-gray-200 rounded-xl shadow-sm hover:bg-blue-100 hover:border-blue-300 hover:shadow-md transition-all duration-200 transform hover:scale-103';
                answerButton.textContent = answer.text;
                
                // Pass the archetype to the selectAnswer function
                answerButton.onclick = () => selectAnswer(answer.archetype);
                
                answersGrid.appendChild(answerButton);
            });

            quizContainer.appendChild(answersGrid);
        }

        function selectAnswer(archetype) {
            // Record the score
            if (scores.hasOwnProperty(archetype)) {
                scores[archetype]++;
            }

            // Move to the next question
            currentQuestionIndex++;
            renderQuestion();
        }

        // --- DASHBOARD LOGIC ---
        function calculateResult() {
            let maxScore = -1;
            let resultArchetype = 'Visionary'; // Default

            // Find the archetype with the highest score
            for (const archetype in scores) {
                if (scores[archetype] > maxScore) {
                    maxScore = scores[archetype];
                    resultArchetype = archetype;
                }
            }
            return resultArchetype;
        }

        function renderDashboard() {
            const userArchetype = calculateResult();
            const data = archetypes[userArchetype];

            // Clear previous results
            questList.innerHTML = '';
            passionPlaygroundContainer.innerHTML = ''; // Clear playground
            
            // Populate archetype info
            archetypeResult.textContent = userArchetype;
            archetypeDescription.textContent = data.description;

            // Populate quests
            data.quests.forEach(quest => {
                const questCard = document.createElement('div');
                questCard.className = 'bg-gray-50 p-6 rounded-xl shadow-lg border border-gray-200';
                
                questCard.innerHTML = `
                    <div class="flex items-center mb-3">
                        <div class="flex-shrink-0 flex items-center justify-center w-10 h-10 bg-blue-100 rounded-full mr-4">
                            <!-- Simple Badge Icon -->
                            <svg class="w-6 h-6 text-blue-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                            </svg>
                        </div>
                        <h4 class="text-xl font-bold">${quest.title}</h4>
                    </div>
                    <p class="text-gray-600 ml-14">${quest.description}</p>
                `;
                questList.appendChild(questCard);
            });

            // --- NEW: Render the interactive passion playground ---
            renderPassionPlayground(userArchetype);
        }

        // --- NEW: PASSION PLAYGROUND RENDER LOGIC ---
        function renderPassionPlayground(archetype) {
            passionPlaygroundContainer.innerHTML = ''; // Clear it first

            switch (archetype) {
                case 'Builder':
                    buildBuilderGame();
                    break;
                case 'Visionary':
                    buildVisionaryGame();
                    break;
                case 'Strategist':
                    buildStrategistGame();
                    break;
            }
        }

        // --- BUILDER GAME: PIXEL ART ---
        function buildBuilderGame() {
            let html = `
                <h4 class="text-xl font-bold mb-4">Builder's Sandbox</h4>
                <p class="text-gray-600 mb-4">You love to create. Click to build some pixel art!</p>
                
                <!-- Color Palette -->
                <div class="flex space-x-2 mb-4">
                    ${['#ef4444', '#f97316', '#eab308', '#22c55e', '#3b82f6', '#8b5cf6', '#000000', '#e5e7eb'].map(color => `
                        <div class="color-swatch ${color === builder_currentColor ? 'selected' : ''}" 
                             style="background-color: ${color}; ${color === '#e5e7eb' ? 'border-color: #9ca3af;' : ''}"
                             onclick="builder_selectColor(this, '${color}')">
                        </div>
                    `).join('')}
                </div>

                <!-- Pixel Grid -->
                <div classgrid grid-cols-10 gap-0" style="display: grid; grid-template-columns: repeat(10, 1fr); border: 1px solid #ccc;">
                    ${Array.from({ length: 100 }, () => `<div class="builder-grid-cell" onclick="builder_paintCell(this)"></div>`).join('')}
                </div>
                <button onclick="buildBuilderGame()" class="mt-4 text-sm bg-gray-200 text-gray-700 px-3 py-1 rounded-md hover:bg-gray-300">Clear</button>
            `;
            passionPlaygroundContainer.innerHTML = html;
        }

        function builder_selectColor(swatchElement, color) {
            builder_currentColor = color;
            // Update selected visual state
            document.querySelectorAll('.color-swatch').forEach(sw => sw.classList.remove('selected'));
            swatchElement.classList.add('selected');
        }

        function builder_paintCell(cell) {
            cell.style.backgroundColor = builder_currentColor;
        }


        // --- VISIONARY GAME: IDEA SPARK ---
        function buildVisionaryGame() {
            let html = `
                <h4 class="text-xl font-bold mb-4">The Idea Spark</h4>
                <p class="text-gray-600 mb-6">You see the big picture. Let's spark some new ideas!</p>
                <div class="text-center">
                    <button onclick="visionary_generateIdea()" class="bg-blue-600 text-white font-bold py-3 px-6 rounded-full shadow-lg hover:bg-blue-700 transition-all duration-300 transform hover:scale-105">
                        Spark a New Idea
                    </button>
                    <div id="idea-output" class="mt-8 p-6 bg-white rounded-lg shadow-inner min-h-[100px] flex items-center justify-center">
                        <p class="text-2xl font-semibold text-gray-500">Click the button to start...</p>
                    </div>
                </div>
            `;
            passionPlaygroundContainer.innerHTML = html;
        }

        function visionary_generateIdea() {
            const part1 = ["A social media app", "A community project", "A sustainable product", "A new art form", "A tech startup", "A podcast series"];
            const part2 = ["for pet owners", "that helps students study", "to reduce food waste", "inspired by nature", "for remote teams", "about forgotten history"];
            
            const randomIdea = `${part1[Math.floor(Math.random() * part1.length)]} ${part2[Math.floor(Math.random() * part2.length)]}.`;
            
            document.getElementById('idea-output').innerHTML = `
                <p class="text-2xl font-semibold text-blue-700">${randomIdea}</p>
            `;
        }

        // --- STRATEGIST GAME: LOGIC PUZZLE ---
        function buildStrategistGame() {
            // Scramble the initial state
            strategist_gameState = Array.from({ length: 9 }, () => Math.round(Math.random()));
            // Ensure it's not already solved
            if (strategist_gameState.every(val => val === 0) || strategist_gameState.every(val => val === 1)) {
                strategist_gameState[4] = 1; // Just flip the middle one
            }

            let html = `
                <h4 class="text-xl font-bold mb-4">System Optimizer</h4>
                <p class="text-gray-600 mb-4">You're a logical thinker. Can you solve this puzzle? The goal is to make all lights green (or all off). Clicking a light toggles it and its neighbors.</p>
                <div id="strategist-grid" class="grid grid-cols-3 gap-2 max-w-xs mx-auto">
                    <!-- Lights will be drawn by JS -->
                </div>
                <div id="strategist-win" class="text-center font-bold text-green-600 mt-4 h-6"></div>
                <div class="text-center">
                    <button onclick="buildStrategistGame()" class="mt-4 text-sm bg-gray-200 text-gray-700 px-3 py-1 rounded-md hover:bg-gray-300">Reset Puzzle</button>
                </div>
            `;
            passionPlaygroundContainer.innerHTML = html;
            strategist_drawGrid();
        }

        function strategist_drawGrid() {
            const grid = document.getElementById('strategist-grid');
            if (!grid) return;
            grid.innerHTML = '';
            
            for (let i = 0; i < 9; i++) {
                const light = document.createElement('div');
                light.className = `strategist-light ${strategist_gameState[i] ? 'on' : 'off'}`;
                light.onclick = () => strategist_toggleLight(i);
                grid.appendChild(light);
            }
        }

        function strategist_toggleLight(index) {
            const indicesToToggle = [index];
            const row = Math.floor(index / 3);
            const col = index % 3;

            if (col > 0) indicesToToggle.push(index - 1); // Left
            if (col < 2) indicesToToggle.push(index + 1); // Right
            if (row > 0) indicesToToggle.push(index - 3); // Top
            if (row < 2) indicesToToggle.push(index + 3); // Bottom

            indicesToToggle.forEach(i => {
                if (i >= 0 && i < 9) {
                    strategist_gameState[i] = 1 - strategist_gameState[i]; // Flip 0 to 1 or 1 to 0
                }
            });

            strategist_drawGrid();
            strategist_checkWin();
        }
        
        function strategist_checkWin() {
            const winMessage = document.getElementById('strategist-win');
            if (!winMessage) return;

            const allOn = strategist_gameState.every(val => val === 1);
            const allOff = strategist_gameState.every(val => val === 0);

            if (allOn || allOff) {
                winMessage.textContent = 'System Optimized! Well done.';
            } else {
                winMessage.textContent = '';
            }
        }

        // --- INITIALIZE APP ---
        // Show the homepage by default when the script loads
        showPage(pageHome);

    </script>
</body>
</html>
